USE_OCAMLFIND = true
OCAMLPACKS[] = \
  netstring \
  cryptokit \
  calendar \
  cohttp \
  lwt.syntax \
  xmlm 


NATIVE_ENABLED = true
BYTE_ENABLED = true

OCAMLFLAGS  += -dtypes 
OCAMLFINDFLAGS += -syntax camlp4o

FILES[] = s3 eC2 http_method util creds xml

LIB = aws
OCAML_LIBS[] = $(LIB)

ec2c: ec2c.ml $(LIB).cma
  $(OCAMLFIND) ocamlmktop $(OCAMLFLAGS) -package $(string $(OCAMLPACKS)) $(LIB).cma ec2c.ml -o ec2c -linkpkg

.DEFAULT: $(OCamlLibrary $(LIB), $(FILES)) \
  $(OCamlProgram s3c, s3c) ec2c 

.PHONY:  clean

clean:
	rm -f $(filter-proper-targets $(ls R, .)) *.s *.annot